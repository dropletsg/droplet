 <div class="container">
  

      <%= label_tag "message" %><br />
      <%# <%= text_area_tag "message",
        @display_mssg,
        rows:15, cols:90 %> 
        <textarea id="telegram-msg" name="w3review" rows="4" cols="50">
          <%= @display_msg  %>
        </textarea>

     <button type="button" class="post-button">Click Me!</button>

 
 
<script src="http://js.nicedit.com/nicEdit-latest.js" type="text/javascript"></script>
<script type="text/javascript">bkLib.onDomLoaded(nicEditors.allTextAreas);</script>



<script>
  new nicEditor().panelInstance('telegram-msg');
  
  let post_button = document.querySelector(".post-button");
  post_button.addEventListener("click", (e)=>{

    let area = nicEditors.findEditor('telegram-msg');
    let content = area.getContent();
    console.log(content)

    fetch("https://api.telegram.org/bot1719790312:AAFWT2mpG1YETwJRmzhHVw6BfxyIAPwC47M/sendMessage", {
        method: "POST",
        headers: {
          "Accept": "application/json",
          "Content-Type": "application/json"
        },
        body: JSON.stringify({ 
          "chat_id":-1001170880075,
          "text": content,
          "parse_mode": "HTML" 
          })
      })
        .then(response => response.json())
        .then((data) => {
          console.log(data); // Look at local_names.default
        });
  })
</script>

<script async src="https://telegram.org/js/telegram-widget.js?14" data-telegram-share-url="#"  data-comment="<%= @display_mssg %>" data-size="large"></script>
