<div class="case-index-top">
  <%= link_to "Add Case", new_case_path %>
</div>
<div class="all-case-card">
  <table class="table table-striped table-hover">
    <tr>
        <th>Case No.</th>
        <th>Created On</th>
        <th>Name</th>
        <th>Status</th>
        <th>Start On</th>
        <th>End On</th>
        <th>Coordinator</th>
        <th>Progress</th>
    </tr>
    <tr>
        <% @cases.each do |c| %>
        
        <tr class = "case-row" data-case-id="<%= c.id %>"  >
          
            <td><%= c.id %></td> 
            <th><%= c.created_at.strftime("%d %B %Y") %></th>
            <td><%= c.worker.name %></td>
            <td><%= c.status %></td>
            <td><%= c.start_date %></td>
            <td><%= c.end_date %></td>
            <td><%= c.coordinator.name %></td>
            <td style="width:20%">
              <div class="progress" style="height: 20px;">
                <div class="progress-bar" role="progressbar" style="width: <%= c.calculate_progress%>%;" 
                     aria-valuenow="55" aria-valuemin="0" aria-valuemax= <%= c.target_amount %>><%= c.calculate_progress%>%
                </div>
              </div>
              <div class="row">
                <div class="col">
                  <%= "current $" %>
                </div>
                <div class="col" style="text-align: right;">
                  <%= c.target_amount.format %>
                </div>
              </div>
            </td>
            
          <% end %>
        </tr>
        
      </tr>
  </table>
</div>

<%# <script>
  const row = document.querySelectorAll(".case-row");
  row.forEach((element) => {
      element.addEventListener('click', () => {
      const case_id = element.dataset.caseId;
      window.location.replace("/cases/"+case_id);
    });
  });
</script> %>
